# SSL Auto-renewal crontab for Smart Carwash
# Автоматическое обновление SSL сертификатов Let's Encrypt

# Проверка SSL сертификата каждый день в 2:00 утра
0 2 * * * /home/artem/smart_carwash/smart_carwash/ssl-management/ssl_renew_simple.sh >> /home/artem/smart_carwash/smart_carwash/logs/ssl_auto_renew.log 2>&1

# Дополнительная проверка каждые 6 часов (на случай проблем)
0 */6 * * * /home/artem/smart_carwash/smart_carwash/ssl-management/ssl_check.sh >> /home/artem/smart_carwash/smart_carwash/logs/ssl_check.log 2>&1

# Еженедельная проверка статуса (воскресенье в 3:00 утра)
0 3 * * 0 /home/artem/smart_carwash/smart_carwash/ssl-management/ssl_check.sh

# Очистка старых логов (каждый месяц)
0 4 1 * * find /home/artem/smart_carwash/smart_carwash/logs -name "ssl_*.log" -mtime +30 -delete
*/5 * * * * /home/artem/smart_carwash/smart_carwash/security_monitor.sh
*/5 * * * * /home/artem/smart_carwash/smart_carwash/security_monitor.sh
0 2 * * 0 /home/artem/smart_carwash/smart_carwash/scripts/docker-cleanup.sh
0 6 * * * df -h | grep -E '9[0-9]%|100%' && echo 'WARNING: Disk usage is high!' | mail -s 'Disk Usage Alert' root
0 3 * * 6 find /var/log -name '*.log.*' -mtime +7 -delete
30 3 * * 6 find /var/lib/docker/containers -name '*.log' -mtime +7 -delete
0 2 * * * /home/artem/smart_carwash/smart_carwash/scripts/docker-cleanup.sh
0 6 * * * df -h | grep -E '9[0-9]%|100%' && echo 'WARNING: Disk usage is high!' | mail -s 'Disk Usage Alert' root
0 3 * * 6 find /var/log -name '*.log.*' -mtime +7 -delete
30 3 * * 6 find /var/lib/docker/containers -name '*.log' -mtime +7 -delete
0 4 * * * /home/artem/smart_carwash/smart_carwash/scripts/cleanup-journal.sh
