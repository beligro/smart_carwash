# üõ°Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Smart Carwash

## –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∏–ø—Ç–æ–º–∞–π–Ω–µ—Ä–æ–≤

### 1. –§–∞–π—Ä–≤–æ–ª (UFW)
- **–§–∞–π–ª:** `setup_firewall.sh`
- **–§—É–Ω–∫—Ü–∏—è:** –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø
- **–ó–∞–ø—É—Å–∫:** `./setup_firewall.sh`

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–§–∞–π–ª:** `security_monitor.sh`
- **–§—É–Ω–∫—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏–ø—Ç–æ–º–∞–π–Ω–µ—Ä—ã –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–õ–æ–≥–∏:** `/var/log/security_monitor.log`

### 3. –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL
- **–§–∞–π–ª:** `postgres_security.conf`
- **–§—É–Ω–∫—Ü–∏—è:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π, SSL, –∞—É–¥–∏—Ç
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- **Read-only —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**
- **No new privileges**
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º**
- **Tmpfs –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**

### 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞
- **–§–∞–π–ª:** `auto_protection.sh`
- **–§—É–Ω–∫—Ü–∏—è:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç cron –∑–∞–¥–∞—á–∏ –∏ systemd —Ç–∞–π–º–µ—Ä—ã
- **–ó–∞–ø—É—Å–∫:** `./auto_protection.sh`

### 6. –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–§–∞–π–ª:** `emergency_response.sh`
- **–§—É–Ω–∫—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- **–ó–∞–ø—É—Å–∫:** `./emergency_response.sh`

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—â–∏—Ç—ã
```bash
# –°—Ç–∞—Ç—É—Å —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status

# –°—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
sudo systemctl status security-monitor.timer

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
tail -f /var/log/security_monitor.log
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏–ø—Ç–æ–º–∞–π–Ω–µ—Ä—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep -E "(kinsing|kdevtmpfsi|libsystem|xmrig)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker exec carwash_postgres ps aux | grep -E "(kinsing|kdevtmpfsi)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CPU
top -bn1 | head -5
```

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
```bash
# –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∫—Ä–∏–ø—Ç–æ–º–∞–π–Ω–µ—Ä
./emergency_response.sh

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose down

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å –Ω—É–ª—è
docker-compose down -v
docker-compose up -d
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É:**
   ```bash
   sudo apt update && sudo apt upgrade -y
   ```

2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -f /var/log/security_monitor.log
   ```

3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞—â–∏—Ç—ã:**
   ```bash
   sudo systemctl status security-monitor.timer
   ```

4. **–î–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:**
   ```bash
   docker exec carwash_postgres pg_dump -U postgres carwash > backup_$(date +%Y%m%d_%H%M%S).sql
   ```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- **–õ–æ–≥–∏:** `/var/log/security_monitor.log`
- **–°—Ç–∞—Ç—É—Å:** `sudo systemctl status security-monitor.timer`
