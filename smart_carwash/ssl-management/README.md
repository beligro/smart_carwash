# SSL Management - Smart Carwash

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ Let's Encrypt.

## –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### üöÄ –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ)

#### `ssl_renew_simple.sh` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: 
  - `./ssl_renew_simple.sh` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - `./ssl_renew_simple.sh force` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - `./ssl_renew_simple.sh check` - —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Docker, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç sudo

#### `ssl_check.sh` - –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ nginx
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
  - `./ssl_check.sh` - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
  - `./ssl_check.sh expiry` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
  - `./ssl_check.sh nginx` - –ø—Ä–æ–≤–µ—Ä–∫–∞ nginx
  - `./ssl_check.sh ssl` - —Ç–µ—Å—Ç SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥, –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

#### `ssl_auto_renew.sh` - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram chat_id

#### `ssl_auto_renew_docker.sh` - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Docker —Å–∫—Ä–∏–ø—Ç
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å webroot –º–µ—Ç–æ–¥–æ–º
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç webroot –≤–º–µ—Å—Ç–æ standalone

#### `setup_ssl_notifications.sh` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è SSL
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `./setup_ssl_notifications.sh`

### üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### `ssl_crontab` - Cron –∑–∞–¥–∞—á–∏
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∞**: `crontab ssl_crontab`
- **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**:
  - –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00 - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤ - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
  - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –≤ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 3:00 - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### `SSL_AUTO_RENEWAL.md` - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–í–∫–ª—é—á–∞–µ—Ç**: –£—Å—Ç–∞–Ω–æ–≤–∫—É, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### üóÇÔ∏è –ê—Ä—Ö–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

#### `get_letsencrypt_ssl_legacy.sh` - –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–∫—Ä–∏–ø—Ç
- **–°—Ç–∞—Ç—É—Å**: –ê—Ä—Ö–∏–≤–Ω—ã–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **–ü—Ä–∏—á–∏–Ω–∞**: –ó–∞–º–µ–Ω–µ–Ω —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω**: –î–ª—è —Å–ø—Ä–∞–≤–∫–∏

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å SSL**:
   ```bash
   ./ssl_check.sh
   ```

2. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**:
   ```bash
   ./ssl_renew_simple.sh force
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**:
   ```bash
   crontab ssl_crontab
   ```

4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**:
   ```bash
   ./setup_ssl_notifications.sh
   ```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
ssl-management/
‚îú‚îÄ‚îÄ README.md                           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ SSL_AUTO_RENEWAL.md                 # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ ssl_renew_simple.sh                 # üöÄ –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ ssl_check.sh                        # üöÄ –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
‚îú‚îÄ‚îÄ ssl_auto_renew.sh                   # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ ssl_auto_renew_docker.sh            # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Docker —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ setup_ssl_notifications.sh          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ ssl_crontab                         # Cron –∑–∞–¥–∞—á–∏
‚îî‚îÄ‚îÄ get_letsencrypt_ssl_legacy.sh       # üóÇÔ∏è –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —Å–∫—Ä–∏–ø—Ç
```

## –õ–æ–≥–∏

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/home/artem/smart_carwash/smart_carwash/logs/`:
- `ssl_auto_renew.log` - –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `ssl_check.log` - –ª–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./ssl_check.sh` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `../logs/`
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ `SSL_AUTO_RENEWAL.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
