# Документация фронтенда

## Обзор

Фронтенд приложения умной автомойки состоит из нескольких интерфейсов:

1. **Telegram Mini App** - основной интерфейс для пользователей
2. **Интерфейс администратора** - панель управления для администраторов
3. **Интерфейс кассира** - упрощенный интерфейс для кассиров
4. **Главная страница** - информационная страница

## Структура проекта

```
frontend/
├── src/
│   ├── apps/
│   │   ├── admin/           # Интерфейс администратора
│   │   │   ├── components/  # Компоненты администратора
│   │   │   ├── AdminApp.js  # Главный компонент админки
│   │   │   └── AdminLoginPage.js
│   │   ├── cashier/         # Интерфейс кассира
│   │   ├── home/            # Главная страница
│   │   └── telegram/        # Telegram Mini App
│   ├── shared/              # Общие компоненты и утилиты
│   │   ├── components/      # Переиспользуемые компоненты
│   │   ├── services/        # API сервисы
│   │   ├── styles/          # Стили и темы
│   │   └── utils/           # Утилиты
│   └── App.js               # Главный компонент приложения
```

## Интерфейс администратора

### Функциональность

Интерфейс администратора предоставляет полный контроль над системой умной автомойки:

#### 1. Панель управления (Dashboard)
- Обзор всех разделов управления
- Быстрый доступ к основным функциям
- Статистика системы

#### 2. Управление боксами мойки
- **Создание боксов**: добавление новых боксов с указанием номера, статуса и типа услуги
- **Редактирование боксов**: изменение параметров существующих боксов
- **Удаление боксов**: удаление боксов (только свободных)
- **Фильтрация**: по статусу и типу услуги
- **Мониторинг**: отображение текущего состояния всех боксов

**API endpoints:**
- `GET /admin/washboxes` - список боксов с фильтрацией
- `POST /admin/washboxes` - создание бокса
- `PUT /admin/washboxes` - редактирование бокса
- `DELETE /admin/washboxes` - удаление бокса
- `GET /admin/washboxes/by-id` - получение бокса по ID

#### 3. Управление сессиями мойки
- **Просмотр сессий**: список всех сессий с детальной информацией
- **Фильтрация**: по статусу, типу услуги, пользователю, дате
- **Пагинация**: для больших объемов данных
- **Детальная информация**: полная информация о каждой сессии

**API endpoints:**
- `GET /admin/sessions` - список сессий с фильтрацией
- `GET /admin/sessions/by-id` - получение сессии по ID

#### 4. Мониторинг очереди
- **Текущее состояние**: отображение количества людей в очереди
- **Статус боксов**: визуализация состояния всех боксов
- **Детальная информация**: список пользователей в очереди с позициями
- **Автообновление**: данные обновляются каждые 30 секунд

**API endpoints:**
- `GET /admin/queue/status` - статус очереди с опциональными деталями

#### 5. Управление пользователями
- **Список пользователей**: просмотр всех зарегистрированных пользователей
- **Информация о пользователях**: детальная информация по каждому пользователю
- **Пагинация**: для больших объемов данных

**API endpoints:**
- `GET /admin/users` - список пользователей с пагинацией
- `GET /admin/users/by-id` - получение пользователя по ID

#### 6. Управление кассирами
- **Создание кассиров**: добавление новых учетных записей кассиров
- **Редактирование**: изменение данных кассиров
- **Удаление**: удаление учетных записей кассиров

### Компоненты

#### WashBoxManagement
Компонент для управления боксами мойки с функциями:
- Отображение списка боксов в табличном виде
- Фильтрация по статусу и типу услуги
- Модальные окна для создания и редактирования
- Валидация данных
- Обработка ошибок

#### SessionManagement
Компонент для управления сессиями с функциями:
- Табличное отображение сессий
- Множественная фильтрация
- Пагинация
- Ссылки на детальную информацию

#### QueueStatus
Компонент для мониторинга очереди с функциями:
- Визуализация состояния боксов
- Статистика очереди
- Детальная информация о пользователях
- Автообновление данных

#### UserManagement
Компонент для управления пользователями с функциями:
- Список пользователей
- Пагинация
- Информация о ролях пользователей

### Навигация

Навигация реализована с помощью React Router:
- `/admin` - панель управления
- `/admin/washboxes` - управление боксами
- `/admin/sessions` - управление сессиями
- `/admin/queue` - мониторинг очереди
- `/admin/users` - управление пользователями
- `/admin/cashiers` - управление кассирами

### Стилизация

Используется styled-components для стилизации:
- Единая тема для всего приложения
- Адаптивный дизайн
- Современный UI с анимациями
- Цветовая схема для статусов и типов услуг

### Безопасность

- Проверка авторизации администратора
- Защищенные маршруты
- Валидация данных на клиенте
- Обработка ошибок API

## Telegram Mini App

### Функциональность

Основной интерфейс для пользователей через Telegram:

#### 1. Приветственное сообщение
- Информация о системе
- Кнопки для начала работы

#### 2. Выбор услуги
- Мойка
- Обдув воздухом
- Пылесос
- Комбинированные услуги

#### 3. Информация о мойке
- Статус текущей сессии
- Таймер
- Информация о боксе

#### 4. История сессий
- Список прошлых сессий
- Детальная информация

#### 5. Статус очереди
- Информация о текущей очереди
- Время ожидания

### Компоненты

#### WelcomeMessage
Приветственное сообщение с информацией о системе

#### ServiceSelector
Выбор типа услуги с описанием и стоимостью

#### WashInfo
Отображение информации о текущей сессии мойки

#### SessionDetails
Детальная информация о сессии с таймером

#### SessionHistory
История сессий пользователя

#### Header
Заголовок с навигацией и статусом

## Общие компоненты

### UI компоненты

#### Button
Универсальная кнопка с различными вариантами стилизации

#### Card
Карточка для отображения контента

#### StatusBadge
Бейдж для отображения статусов

#### Timer
Компонент таймера с обратным отсчетом

### Сервисы

#### ApiService
Сервис для работы с API:
- HTTP запросы
- Обработка ошибок
- Авторизация

#### AuthService
Сервис авторизации:
- Вход/выход
- Проверка прав доступа
- Управление токенами

### Утилиты

#### formatters
Функции для форматирования данных:
- Форматирование дат
- Форматирование времени
- Форматирование статусов

#### statusHelpers
Вспомогательные функции для работы со статусами

#### useTimer
React hook для работы с таймерами

## Стили и темы

### Глобальные стили
- Сброс CSS
- Базовые стили
- Шрифты

### Тема
- Цветовая схема
- Размеры
- Отступы
- Тени

### Адаптивность
- Мобильная версия
- Планшетная версия
- Десктопная версия

## Безопасность

### Авторизация
- JWT токены
- Проверка прав доступа
- Защищенные маршруты

### Валидация
- Валидация форм
- Проверка данных
- Обработка ошибок

### CORS
- Настройка CORS для API
- Безопасные заголовки

## Производительность

### Оптимизация
- Ленивая загрузка компонентов
- Мемоизация
- Оптимизация изображений

### Кэширование
- Кэширование API запросов
- Локальное хранение данных

## Развертывание

### Сборка
```bash
npm run build
```

### Docker
```dockerfile
FROM nginx:alpine
COPY build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
```

### Nginx конфигурация
Настроена для работы с React Router и API прокси

## Мониторинг

### Логирование
- Логи ошибок
- Логи производительности
- Аналитика

### Метрики
- Время загрузки
- Производительность
- Ошибки пользователей
